package com.spring.webservice.utill;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

public class TelegramSend {
	public static void SendMessage(String Content){
		
		System.out.println("@@@@@@@@@@");
		System.out.println(Content);
		
        String urlString = "https://api.telegram.org/bot%s/sendMessage?chat_id=%s&text=%s";

        //Add Telegram token (given Token is fake)
        String apiToken = "1334891991:AAGkrXOd3oPP92tQzRclNY4nmxwuvMPIUqM";
      
        //Add chatId (given chatId is fake)
        String chatId = "-381510796";
        String text = "안녕";

        urlString = String.format(urlString, apiToken, chatId, text);

        try {
            URL url = new URL(urlString);
            URLConnection conn = url.openConnection();
            InputStream is = new BufferedInputStream(conn.getInputStream());
        } catch (IOException e) {
            e.printStackTrace();
        }
        
		/*
	    String BOT_NAME = "Kim_Scheduler_Bot"; //Bot Name
	    String AUTH_KEY = "1334891991:AAGkrXOd3oPP92tQzRclNY4nmxwuvMPIUqM"; //Bot Auth-Key
	    String CHAT_ID = "-381510796"; //Chat ID
	    String TEXT = Content.replace("\n", "%0A");
	   
	    String sendURL = "https://api.telegram.org/bot" 
	    					+ AUTH_KEY 
	    					+ "/sendmessage?chat_id=" + CHAT_ID 
	    					+ "&text=" + TEXT;
	   
		BufferedReader in = null; 
		try { 
			URL obj = new URL(sendURL); // 호출할 url 
			HttpURLConnection con = (HttpURLConnection)obj.openConnection(); 
			
			con.setRequestMethod("GET"); 
			
			in = new BufferedReader(new InputStreamReader(con.getInputStream(), "UTF-8")); 
			
			String line; 
			while((line = in.readLine()) != null) { // response를 차례대로 출력 
				System.out.println(line); 
			} 
		} catch(Exception e) { 
			e.printStackTrace(); 
		} finally { 
			if(in != null) try { in.close(); } catch(Exception e) { e.printStackTrace(); } 
		}
		
		*/
	}
}
